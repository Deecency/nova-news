import 'package:cached_network_image/cached_network_image.dart';import 'package:dio/dio.dart';import 'package:flutter/material.dart';import 'package:intl/intl.dart';import 'package:http/http.dart' as http;import 'package:news_app/models/news/news.dart';import 'package:news_app/shared/shared.dart';import 'package:news_app/shared/widgets/animated_arrow.dart';class NewsDetails extends StatefulWidget {  final News news;  const NewsDetails({    super.key,    required this.news,  });  @override  State<NewsDetails> createState() => _NewsDetailsState();}class _NewsDetailsState extends State<NewsDetails> {  late ScrollController _scrollController;  double _readingValue = 0;  @override  void initState() {    _scrollController = ScrollController();    _scrollController.addListener(_scrollListener);    super.initState();  }  @override  void dispose() {    _scrollController.removeListener(_scrollListener);    _scrollController.dispose();    super.dispose();  }  void _scrollListener() {    final currentP = _scrollController.position.pixels;    final maxPosition = _scrollController.position.maxScrollExtent;    setState(() {      _readingValue = currentP / maxPosition;    });  }  @override  Widget build(BuildContext context) {    return Container(        height: 100.height,        width: 100.width,        decoration: BoxDecoration(            color: Colors.grey.shade900,            gradient: LinearGradient(              colors: [                Colors.grey.shade800,                Colors.grey.shade900,                Colors.black,              ],              stops: const [0, 0, 1],              begin: Alignment.topRight,              end: Alignment.bottomLeft,            )),        child: Column(          children: [            52.vSpacer,            Container(              height: 40.h,              alignment: Alignment.center,              child: const AnimatedArrow(),            ),            8.vSpacer,            LinearProgressIndicator(              backgroundColor: Colors.black,              color: Colors.deepOrange,              minHeight: 10.h,              value: _readingValue,            ),            16.vSpacer,            Expanded(              child: ListView(                controller: _scrollController,                physics: const ClampingScrollPhysics(),                padding: EdgeInsets.symmetric(horizontal: 20.w),                children: [                  Row(                    children: [                      Container(                        height: 40.h,                        width: 40.h,                        decoration: const BoxDecoration(                          color: Colors.black,                          shape: BoxShape.circle,                        ),                      ),                      16.hSpacer,                      Column(                        crossAxisAlignment: CrossAxisAlignment.start,                        children: [                          Text(                            "Written by",                            style: TextStyle(                              color: Colors.grey,                              fontSize: 10.text,                              fontWeight: FontWeight.w600,                            ),                          ),                          4.vSpacer,                          Text(                            "${widget.news.source?.name}",                            style: TextStyle(                              color: Colors.white,                              fontSize: 12.text,                              fontWeight: FontWeight.w600,                            ),                          ),                        ],                      ),                      24.hSpacer,                      Column(                        crossAxisAlignment: CrossAxisAlignment.start,                        children: [                          Text(                            "Published on",                            style: TextStyle(                              color: Colors.grey,                              fontSize: 10.text,                              fontWeight: FontWeight.w600,                            ),                          ),                          4.vSpacer,                          Text(                            DateFormat.MMMMEEEEd().format(widget.news.publishedAt!),                            style: TextStyle(                              color: Colors.white,                              fontSize: 12.text,                              fontWeight: FontWeight.w600,                            ),                          ),                        ],                      ),                    ],                  ),                  8.vSpacer,                  Text(                    "${widget.news.title}",                    style: TextStyle(                      color: Colors.white,                      fontSize: 20.text,                      height: 32.h / 20.text,                      fontWeight: FontWeight.w600,                    ),                  ),                  16.vSpacer,                  CachedNetworkImage(                    height: MediaQuery.of(context).size.height / 4,                    width: MediaQuery.of(context).size.width,                    imageUrl: widget.news.urlToImage ?? "",                    imageBuilder: (context, imageProvider) => Container(                      decoration: BoxDecoration(                        borderRadius: BorderRadius.circular(8.w),                        image: DecorationImage(                          image: imageProvider,                          fit: BoxFit.cover,                        ),                      ),                    ),                    placeholder: (context, url) => SizedBox(                      height: 40.h,                      width: 40.h,                      child: const CircularProgressIndicator.adaptive(),                    ),                    errorWidget: (context, url, error) => const Icon(Icons.error),                  ),                  8.vSpacer,                  TextButton(                    style: ButtonStyle(                      backgroundColor: const WidgetStatePropertyAll(Colors.white10),                      shape: WidgetStatePropertyAll(RoundedRectangleBorder(                        borderRadius: BorderRadius.circular(8.h),                      )),                      fixedSize: WidgetStatePropertyAll(Size(double.maxFinite, 40.h)),                    ),                    onPressed: null,                    child: Text(                      "Image property of ${widget.news.source?.name}",                      textAlign: TextAlign.center,                      style: TextStyle(                        fontSize: 10.text,                        fontWeight: FontWeight.w500,                        color: Colors.white38,                      ),                    ),                  ),                  8.vSpacer,                  Text(                    "${widget.news.content}",                    style: TextStyle(                      color: Colors.white70,                      fontSize: 10.text,                      fontWeight: FontWeight.w400,                      height: 18.h / 10.text,                    ),                  ),                ],              ),            ),          ],        ));  }}